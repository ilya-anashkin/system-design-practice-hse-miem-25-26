# Решение ДЗ №1

## Этап №1
- Еще раз присмотритесь к архитектуре, коду приложения и проанализируйте - какие метрики мы хотим отслеживать, чтобы понять, что происходит с нашей системой?

1. Метрики HTTP-запросов 
- общее количество
- распределение по методам
- распределение по статусам ответов
- среднее, мин, макс время ответа, 95-й, 99-й перцентили времени ответоа

2. Метрики БД
- число запросов
- время выполнения
- число соединений (активных и лимит)
- информация о работе кэша

3. Метрики самой системы
- CPU
- RAM, SWAP
- Сеть
- Диск

## Этап №2: Стреляем
- Сценарий "Ваша модификация" - измените существующий скрипт каким-нибудь способом. Сделайте себе заметки - в чем фишка вашего сценария? Может, вы хотите проверить что-то другое в нашем приложении или хотите задать нагрузку иного характера?
- Вкратце опишите ваши мысли и сценарии

Можно предложить сценарий, который имитирует поведение пользователей с дополнительной логикой, например, обновление заказов через PUT-запросы. Что делает этот сценарий:
- POST-запросы (60%): Создание новых заказов.
- GET-запросы (30%): Просмотр списка заказов.
- PUT-запросы (10%): Обновление существующих заказов.
- Пауза (0.1 сек): Увеличена пауза между запросами, чтобы нагрузка была более реалистичной.

## Этап №3: Анализируем
- Свяжите анализ с этапом №1 и напишите ваши мысли

Мысли и выводы: глобально такой сценарий не вызвал серьезных проблем. 
- Node Exporter показал 50% idle, что означает, что глобально система загрузилась только наполовину
- Postgres столкнулся с достаточно большим количеством чтений/возвращаемых строк, но это не вызвало проблем, так как в БД использовался кэш
- Метрики k6 показали достаточно быструю скорость ответа от бэкенда (<20ms)

При текущей настройке (на текущей машине) сервис вполне может выдержать такого рода нагрузку без каких-либо проблем

## Этап №4: Решения
- Как справится с той или иной нагрузкой

Для решения возможных будущих проблем с нагрузкой можно рассмотреть следующие методы:
- Масштабирование (горизонтальное или вертикальное)
- Оптимизация БД - индексация, кэширование, оптимизация запросов
- Оптимизация приложения - настройка кэшей, использование очередей, настройка rate limiter

Помимо этого - для того, чтобы контролировать возможную наступившую нагрузку нужно настроить алерты, 

